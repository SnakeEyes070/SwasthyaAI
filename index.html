<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- CRITICAL: Viewport meta tag for mobile responsiveness -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SwasthyaAI - AI-Powered Virtual Physiotherapy</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <!-- MediaPipe for Pose Estimation -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Language Selector Floating Button -->
    <div class="language-selector">
        <button id="languageBtn">
            <i class="fas fa-globe"></i>
            <span id="currentLang">EN</span>
        </button>
        <div class="language-dropdown" id="languageDropdown">
            <button data-lang="en">English</button>
            <button data-lang="hi">हिन्दी</button>
            <button data-lang="mr">मराठी</button>
            <button data-lang="ta">தமிழ்</button>
            <button data-lang="te">తెలుగు</button>
        </div>
    </div>

    <!-- Auth Container -->
    <div class="auth-container">
        <!-- Left Panel - Branding & Info -->
        <div class="auth-branding">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <h1>SwasthyaAI</h1>
                <p class="tagline">AI Rehab Coach</p>
            </div>
            
            <div class="platform-features">
                <h3><i class="fas fa-robot"></i> AI-Powered Features</h3>
                <ul class="features-list">
                    <li><i class="fas fa-check-circle"></i> Real-time pose estimation & skeleton overlay</li>
                    <li><i class="fas fa-check-circle"></i> Live joint angle calculation</li>
                    <li><i class="fas fa-check-circle"></i> Multi-language voice feedback</li>
                    <li><i class="fas fa-check-circle"></i> Exercise form correction</li>
                    <li><i class="fas fa-check-circle"></i> Progress tracking & analytics</li>
                </ul>
            </div>

            <div class="tech-stack">
                <h4><i class="fas fa-code"></i> Powered By</h4>
                <div class="tech-icons">
                    <span class="tech-tag">MediaPipe</span>
                    <span class="tech-tag">TensorFlow.js</span>
                    <span class="tech-tag">Firebase</span>
                    <span class="tech-tag">WebRTC</span>
                </div>
            </div>
        </div>

        <!-- Right Panel - Auth Forms -->
        <div class="auth-forms">
            <!-- Login Form -->
            <div class="auth-card active" id="loginCard">
                <div class="auth-header">
                    <h2><i class="fas fa-sign-in-alt"></i> Welcome to SwasthyaAI</h2>
                    <p>Login to access AI-powered physiotherapy</p>
                </div>

                <div class="role-selection">
                    <div class="role-tabs">
                        <button class="role-tab active" data-role="patient">
                            <i class="fas fa-user"></i> Patient
                        </button>
                        <button class="role-tab" data-role="doctor">
                            <i class="fas fa-user-md"></i> Doctor
                        </button>
                        <button class="role-tab" data-role="therapist">
                            <i class="fas fa-hands-helping"></i> Therapist
                        </button>
                    </div>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <input type="email" id="loginEmail" placeholder="your.email@example.com" required>
                    </div>

                    <div class="form-group">
                        <label for="loginPassword">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="loginPassword" placeholder="Enter your password" required>
                            <button type="button" class="toggle-password" id="toggleLoginPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="forgot-password" id="forgotPassword">Forgot Password?</a>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block btn-lg" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i> Login to Dashboard
                    </button>

                    <div class="divider">
                        <span>Or continue with</span>
                    </div>

                    <div class="social-login">
                        <button type="button" class="btn btn-google">
                            <i class="fab fa-google"></i> Google
                        </button>
                        <button type="button" class="btn btn-microsoft">
                            <i class="fab fa-microsoft"></i> Microsoft
                        </button>
                    </div>

                    <div class="auth-footer">
                        <p>Don't have an account? 
                            <a href="#" id="switchToRegister">Create one now</a>
                        </p>
                        <div class="demo-accounts">
                            <details>
                                <summary><i class="fas fa-flask"></i> Demo Accounts</summary>
                                <div class="demo-grid">
                                    <div class="demo-account">
                                        <strong>Patient:</strong><br>
                                        patient@demo.com<br>
                                        Password: pass123
                                    </div>
                                    <div class="demo-account">
                                        <strong>Doctor:</strong><br>
                                        doctor@demo.com<br>
                                        Password: pass123
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Registration Form -->
            <div class="auth-card" id="registerCard">
                <div class="auth-header">
                    <h2><i class="fas fa-user-plus"></i> Join SwasthyaAI</h2>
                    <p>Start your AI-powered rehabilitation journey</p>
                </div>

                <div class="role-selection">
                    <div class="role-tabs">
                        <button class="role-tab active" data-role="patient">
                            <i class="fas fa-user"></i> Patient
                        </button>
                        <button class="role-tab" data-role="doctor">
                            <i class="fas fa-user-md"></i> Doctor
                        </button>
                        <button class="role-tab" data-role="therapist">
                            <i class="fas fa-hands-helping"></i> Therapist
                        </button>
                    </div>
                </div>

                <form id="registerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="registerFirstName">
                                <i class="fas fa-user"></i> First Name
                            </label>
                            <input type="text" id="registerFirstName" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="registerLastName">
                                <i class="fas fa-user"></i> Last Name
                            </label>
                            <input type="text" id="registerLastName" placeholder="Doe" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="registerEmail">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <input type="email" id="registerEmail" placeholder="your.email@example.com" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="registerPassword">
                                <i class="fas fa-lock"></i> Password
                            </label>
                            <div class="password-input">
                                <input type="password" id="registerPassword" placeholder="Create a password" required>
                                <button type="button" class="toggle-password" id="toggleRegisterPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="passwordStrengthBar"></div>
                                </div>
                                <span class="strength-text" id="passwordStrengthText">Password strength</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="registerConfirmPassword">
                                <i class="fas fa-lock"></i> Confirm Password
                            </label>
                            <div class="password-input">
                                <input type="password" id="registerConfirmPassword" placeholder="Confirm password" required>
                                <button type="button" class="toggle-password" id="toggleConfirmPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Patient-specific fields -->
                    <div class="role-fields" id="patientFields">
                        <h4><i class="fas fa-user-injured"></i> Patient Information</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="patientAge">Age</label>
                                <input type="number" id="patientAge" placeholder="30" min="1" max="120">
                            </div>
                            <div class="form-group">
                                <label for="patientGender">Gender</label>
                                <select id="patientGender">
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="patientCondition">Primary Condition</label>
                            <select id="patientCondition" required>
                                <option value="">Select Condition</option>
                                <option value="knee_replacement">Knee Replacement</option>
                                <option value="back_pain">Chronic Back Pain</option>
                                <option value="shoulder_injury">Shoulder Injury</option>
                                <option value="sports_recovery">Sports Injury Recovery</option>
                                <option value="post_stroke">Post-Stroke Rehabilitation</option>
                                <option value="arthritis">Arthritis</option>
                                <option value="post_surgical">Post-Surgical Recovery</option>
                                <option value="neurological">Neurological Condition</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="patientInjuryDate">Injury/Surgery Date (if applicable)</label>
                            <input type="date" id="patientInjuryDate">
                        </div>
                    </div>

                    <!-- Doctor-specific fields -->
                    <div class="role-fields" id="doctorFields">
                        <h4><i class="fas fa-user-md"></i> Professional Information</h4>
                        <div class="form-group">
                            <label for="doctorLicense">Medical License Number</label>
                            <input type="text" id="doctorLicense" placeholder="PT-12345" required>
                        </div>
                        <div class="form-group">
                            <label for="doctorSpecialty">Specialty</label>
                            <select id="doctorSpecialty" required>
                                <option value="">Select Specialty</option>
                                <option value="physiotherapist">Physiotherapist</option>
                                <option value="orthopedic">Orthopedic Surgeon</option>
                                <option value="sports_medicine">Sports Medicine</option>
                                <option value="rehab_specialist">Rehabilitation Specialist</option>
                                <option value="neurologist">Neurologist</option>
                                <option value="rheumatologist">Rheumatologist</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="doctorHospital">Hospital/Clinic Name</label>
                            <input type="text" id="doctorHospital" placeholder="City General Hospital">
                        </div>
                    </div>

                    <!-- Therapist-specific fields -->
                    <div class="role-fields" id="therapistFields">
                        <h4><i class="fas fa-hands-helping"></i> Therapist Information</h4>
                        <div class="form-group">
                            <label for="therapistLicense">Therapy License Number</label>
                            <input type="text" id="therapistLicense" placeholder="OT-12345" required>
                        </div>
                        <div class="form-group">
                            <label for="therapistExperience">Years of Experience</label>
                            <input type="number" id="therapistExperience" placeholder="5" min="0" max="50">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="termsAgreement" required>
                            <span>I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block btn-lg" id="registerBtn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>

                    <div class="auth-footer">
                        <p>Already have an account? 
                            <a href="#" id="switchToLogin">Login here</a>
                        </p>
                    </div>
                </form>
            </div>

            <!-- Forgot Password Form -->
            <div class="auth-card" id="forgotPasswordCard">
                <div class="auth-header">
                    <h2><i class="fas fa-key"></i> Reset Password</h2>
                    <p>Enter your email to receive reset instructions</p>
                </div>

                <form id="forgotPasswordForm">
                    <div class="form-group">
                        <label for="forgotEmail">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <input type="email" id="forgotEmail" placeholder="your.email@example.com" required>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block btn-lg" id="resetPasswordBtn">
                        <i class="fas fa-paper-plane"></i> Send Reset Link
                    </button>

                    <div class="auth-footer">
                        <p>Remember your password? 
                            <a href="#" id="backToLogin">Back to Login</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Video Demo Modal -->
    <div class="modal-overlay" id="demoModal">
        <div class="modal modal-wide">
            <div class="modal-header">
                <h3><i class="fas fa-video"></i> SwasthyaAI Demo</h3>
                <button class="modal-close" id="closeDemoModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="demo-container">
                    <div class="demo-video">
                        <video autoplay muted loop>
                            <source src="https://assets.codepen.io/4296304/ai-rehab-demo.mp4" type="video/mp4">
                        </video>
                        <div class="demo-overlay">
                            <div class="demo-skeleton">
                                <!-- Skeleton overlay will be drawn here -->
                            </div>
                            <div class="demo-angles">
                                <div class="angle-display">Knee: 90°</div>
                                <div class="angle-display">Elbow: 120°</div>
                                <div class="angle-display">Hip: 150°</div>
                            </div>
                            <div class="demo-feedback">
                                <div class="feedback-message">
                                    <i class="fas fa-bullhorn"></i>
                                    "Keep your back straight"
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-features">
                        <h4><i class="fas fa-star"></i> Key Features</h4>
                        <div class="features-grid">
                            <div class="feature-card">
                                <i class="fas fa-robot"></i>
                                <h5>AI Pose Detection</h5>
                                <p>Real-time 33-point body tracking</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-calculator"></i>
                                <h5>Angle Calculation</h5>
                                <p>Live joint angle measurement</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-language"></i>
                                <h5>Multilingual</h5>
                                <p>5 Indian language support</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-chart-line"></i>
                                <h5>Progress Tracking</h5>
                                <p>Detailed analytics & reports</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="startDemoBtn">
                    <i class="fas fa-play"></i> Try Live Demo
                </button>
                <button class="btn" id="closeDemoBtn">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Area -->
    <div class="notification-panel" id="notificationPanel"></div>

    <!-- Scripts -->
    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
</body>
</html>
